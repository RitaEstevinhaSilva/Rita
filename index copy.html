<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rita Estevinha Silva</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://use.typekit.net/vxb3fyb.css">
</head>

<body>

    <nav>
        <ul>
            <li><a href="#" onclick="setLanguagePreference('en')">English</a></li>
            <li><a href="#" onclick="setLanguagePreference('pt')">PT</a></li>
        </ul>
    </nav>

    <main>
        <h1 data-i18n="welcome_message"></h1>
        <p data-i18n="about_us"></p>
        <p data-i18n="p1-mixed-text"></p>
    </main>

    <script>
        async function fetchLanguageData(lang) {
            const response = await fetch(`languages/${lang}.json`);
            return response.json();
        }

        // Function to set the language preference
        function setLanguagePreference(lang) {
            localStorage.setItem('language', lang);
            location.reload();
        }

        // Function to update content based on selected language
        async function updateContent() {
            const lang = localStorage.getItem('language') || 'en'; // Default language is English
            const langData = await fetchLanguageData(lang);

            // Check if langData is undefined or null
            if (!langData) {
                console.error('Language data is undefined or null.');
                return;
            }

            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                let text = langData[key];

                // Check if text is undefined or null
                if (!text) {
                    console.error(`Text for key '${key}' is undefined or null.`);
                    return;
                }

                // Replace links
                text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');
                // Replace italicized text
                text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
                // Replace bold text
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                element.innerHTML = text;
            });
        }



        // Initialize
        updateContent();

    </script>

</body>

</html>